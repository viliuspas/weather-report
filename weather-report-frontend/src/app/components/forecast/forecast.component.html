@let place = currentPlace();

@if (place) {
    <hr class="m-0"/>
    <div class="content-container h-100">
        <div class="d-flex flex-column flex-sm-row align-items-center">
            <div class="heading-container card">
                <div class="flex-container">
                    <h2 class="m-0">{{ place.place.name }}</h2>
                    <span class="small">{{ place.forecastTimestamps[0].conditionCode | conditionCode }}</span>
                </div>
                
                <div class="flex-container">
                    <span class="fs-2">
                        {{ place.forecastTimestamps[0].airTemperature }}°C
                    </span>
                    <span class="small">
                        Feels like {{ place.forecastTimestamps[0].feelsLikeTemperature }}°C
                    </span>
                </div>
            </div>

            <div class="d-flex flex-row flex-sm-column p-1 p-sm-3 justify-content-center">
                <div class="info-row">
                    <span class="d-none d-sm-inline-flex">Wind speed </span>
                    <span>{{ place.forecastTimestamps[0].windSpeed }} m/s</span>
                    <app-icon [type]="IconType.ARROW_UP" [rotate]="place.forecastTimestamps[0].windDirection"/>
                </div>
                <span class="d-inline-flex d-sm-none mx-3">•</span>
                <div class="info-row">
                    <span class="d-none d-sm-inline-flex">Humidity </span>
                    <span>{{ place.forecastTimestamps[0].relativeHumidity }}%</span>
                    <app-icon [type]="IconType.DROPLET_HALF"/>
                </div>
            </div>
        </div>

        <div class="card overflow-x-scroll">
            <table class="text-center">
                <thead>
                    @for (item of limitedForecast(); track $index) {
                        <th class="py-2 px-3">{{ item.forecastTimeUtc | dateTime: 'hh:mm' }}</th>
                    }
                </thead>
                <tbody>
                    <tr>
                        @for (item of limitedForecast(); track $index) {
                            <td class="p-2">{{ item.airTemperature }}°C</td>
                        }
                    </tr>
                    <tr>
                        @for (item of limitedForecast(); track $index) {
                            <td class="p-2">
                                <div class="gap-1 d-flex flex-row align-items-center justify-content-center">
                                    <app-icon [type]="IconType.DROPLET"/>
                                    <span>{{ item.totalPrecipitation }}%</span>
                                </div>
                            </td>
                        }
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <hr class="m-0"/>
}
